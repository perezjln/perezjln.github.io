{{ $page := . }}
{{ $site := .Site }}
{{ $title := .Title }}
{{ $description := .Description }}

{{ if .IsHome }}
  {{ $title = $site.Title }}
  {{ $description = $site.Params.description | default "Personal academic website of Julien Perez, Full Professor specializing in Machine Learning, Deep Learning, Reinforcement Learning, and AI Research" }}
{{ else if .IsPage }}
  {{ $title = printf "%s | %s" .Title $site.Title }}
  {{ $description = .Summary | default .Description | default $description }}
{{ end }}

<!-- Basic Meta Tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Title and Description -->
<title>{{ $title }}</title>
<meta name="description" content="{{ $description }}">
<meta name="keywords" content="{{ with .Params.keywords }}{{ delimit . ", " }}{{ else }}Machine Learning, Deep Learning, Reinforcement Learning, Natural Language Processing, Dialog Systems, AI Research, Computer Science Professor, EPITA, IONIS, Julien Perez{{ end }}">
<meta name="author" content="{{ $site.Params.author | default "Julien Perez" }}">

<!-- Canonical URL -->
<link rel="canonical" href="{{ .Permalink }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:site_name" content="{{ $site.Title }}">
<meta property="og:locale" content="en_US">
{{ with $site.Params.marketing.seo.image }}
<meta property="og:image" content="{{ . | absURL }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:type" content="image/jpeg">
{{ end }}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@{{ $site.Params.marketing.seo.twitter }}">
<meta name="twitter:creator" content="@{{ $site.Params.marketing.seo.twitter }}">
<meta name="twitter:title" content="{{ $title }}">
<meta name="twitter:description" content="{{ $description }}">
{{ with $site.Params.marketing.seo.image }}
<meta name="twitter:image" content="{{ . | absURL }}">
{{ end }}

<!-- Article specific meta tags -->
{{ if .IsPage }}
<meta property="article:author" content="{{ $site.Params.author }}">
{{ with .PublishDate }}<meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
{{ with .Lastmod }}<meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
{{ with .Params.tags }}
{{ range . }}
<meta property="article:tag" content="{{ . }}">
{{ end }}
{{ end }}
{{ end }}

<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ if .IsHome }}Person{{ else }}WebPage{{ end }}",
  {{ if .IsHome }}
  "name": "Julien Perez",
  "givenName": "Julien",
  "familyName": "Perez",
  "jobTitle": "Full Professor & Head of AI & Pedagogy Research Program",
  "affiliation": {
    "@type": "Organization",
    "name": "EPITA & IONIS Education Group",
    "url": "https://www.epita.fr/"
  },
  "url": "{{ .Permalink }}",
  "description": "{{ $description }}",
  "knowsAbout": [
    "Machine Learning",
    "Deep Learning", 
    "Reinforcement Learning",
    "Natural Language Processing",
    "Dialog Systems",
    "Robotics",
    "Artificial Intelligence"
  ],
  "sameAs": [
    "https://twitter.com/perezjln",
    "https://github.com/perezjln",
    "https://www.linkedin.com/in/julien-perez",
    "https://scholar.google.fr/citations?user=XneKjCsAAAAJ"
  ]
  {{ else }}
  "url": "{{ .Permalink }}",
  "name": "{{ $title }}",
  "description": "{{ $description }}",
  "isPartOf": {
    "@type": "WebSite",
    "name": "{{ $site.Title }}",
    "url": "{{ $site.BaseURL }}"
  }
  {{ end }}
}
</script>

<!-- Additional SEO Meta Tags -->
<meta name="robots" content="index, follow">
<meta name="googlebot" content="index, follow">
<meta name="theme-color" content="#1f2937">
<meta name="msapplication-TileColor" content="#1f2937">

<!-- Preconnect to external domains for performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- RSS Feed -->
{{ with .OutputFormats.Get "RSS" }}
<link rel="alternate" type="application/rss+xml" title="{{ $site.Title }}" href="{{ .Permalink }}">
{{ end }}

<!-- Favicons -->
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">
